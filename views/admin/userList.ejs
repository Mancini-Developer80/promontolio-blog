<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('partials/head') %>
    <title>Blog - NodePrincipe</title>
  </head>
  <body>
    <%- include('partials/header') %>
    <main>
      <h1>User List</h1>
      <p>Here you can manage users for your blog.</p>
      <table>
        <thead>
          <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Role</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(function(user) { %>
          <tr>
            <td><%= user.username %></td>
            <td><%= user.email %></td>
            <td><%= user.role %></td>
            <td>
              <a href="/admin/users/<%= user._id %>/edit">Edit</a>
              <form
                action="/admin/users/<%= user._id %>/delete"
                method="POST"
                style="display: inline"
                onsubmit="return confirm('Are you sure you want to delete this user?');"
              >
                <button type="submit">Delete</button>
              </form>
              <form
                action="/admin/users/<%= user._id %>/reset-password"
                method="POST"
                style="display: inline"
                onsubmit="return confirm('Reset password for this user?');"
              >
                <input
                  type="password"
                  name="newPassword"
                  placeholder="New password"
                  required
                />
                <button type="submit">Reset Password</button>
              </form>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </main>
    <%- include('partials/footer') %>
  </body>
</html>
