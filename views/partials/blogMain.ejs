<main class="blog-home">
  <div class="container container-blog">
    <h1 class="blog-title">
      <i class="fas fa-newspaper"></i>
      News, updates, and interesting information
    </h1>

    <% if (typeof error !== 'undefined' && error) { %>
    <div class="error-message">
      <p><%= error %></p>
    </div>
    <% } %> <% if (articles && articles.length > 0) { %>
    <div class="articles-list">
      <% articles.forEach(article => { %>
      <div class="article-card">
        <div class="article-img">
          <% if (article.imageUrl) { %>
          <img
            class="blog-card-img"
            src="<%= article.imageUrl %>"
            alt="<%= article.title %> - Promontolio"
            loading="lazy"
          />
          <% } else { %>
          <img
            class="blog-card-img"
            src="/image/UlivoBlogCard.webp"
            alt="<%= article.title %> - Promontolio"
            loading="lazy"
          />
          <% } %>
        </div>
        <div class="article-content">
          <h2 class="article-title"><%= article.title %></h2>
          <div class="article-meta">
            <% if (article.author) { %>
            <span class="article-author"
              >By <%= article.author.username %></span
            >
            <% } %>
            <span class="article-date"
              ><%= article.createdAt.toLocaleDateString() %></span
            >
            <% if (article.viewCount) { %>
            <span class="article-views"><%= article.viewCount %> views</span>
            <% } %>
          </div>
          <p class="article-excerpt">
            <% if (article.excerpt) { %> <%= article.excerpt %> Lorem ipsum
            dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor
            incididunt ut labore et dolore magna aliqua. Ut enim ad minim
            veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex
            ea commodo consequat. Duis aute irure dolor in reprehenderit in
            voluptate velit esse cillum dolore eu fugiat nulla pariatur.
            Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
            officia deserunt mollit anim id est laborum. <% } else { %> <%=
            article.content.substring(0, 400).replace(/<[^>]*>/g, '') %> Lorem
            ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
            veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex
            ea commodo consequat. Duis aute irure dolor in reprehenderit in
            voluptate velit esse cillum dolore eu fugiat nulla pariatur.
            Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
            officia deserunt mollit anim id est laborum. Sed ut perspiciatis
            unde omnis iste natus error sit voluptatem accusantium doloremque
            laudantium... <% } %>
          </p>
        </div>
        <div class="blog-btn-container">
          <a class="blog-btn-main" href="/blog/<%= article.slug %>"
            >Read More</a
          >
        </div>
      </div>
      <% }) %>
    </div>

    <!-- Clean Pagination -->
    <% if (pagination && pagination.totalPages > 1) { %>
    <nav class="pagination-nav" aria-label="Blog pagination">
      <div class="pagination-container">
        <!-- Previous Button -->
        <% if (pagination.currentPage > 1) { %>
        <a
          href="<%= pagination.currentPage === 2 ? '/blog' : '/blog/page/' + (pagination.currentPage - 1) %>"
          class="pagination-btn pagination-prev"
        >
          ← Previous
        </a>
        <% } %>

        <!-- Page Numbers -->
        <div class="pagination-numbers">
          <% for (let i = 1; i <= pagination.totalPages; i++) { %> <% if (i ===
          pagination.currentPage) { %>
          <span class="pagination-number active"><%= i %></span>
          <% } else { %>
          <a
            href="<%= i === 1 ? '/blog' : '/blog/page/' + i %>"
            class="pagination-number"
            ><%= i %></a
          >
          <% } %> <% } %>
        </div>

        <!-- Next Button -->
        <% if (pagination.currentPage < pagination.totalPages) { %>
        <a
          href="/blog/page/<%= pagination.currentPage + 1 %>"
          class="pagination-btn pagination-next"
        >
          Next →
        </a>
        <% } %>
      </div>
    </nav>
    <% } %> <% } else { %>
    <div class="no-articles">
      <div class="no-articles-content">
        <i class="fas fa-newspaper no-articles-icon"></i>
        <h2>No Articles Yet</h2>
        <p>We're working on some great content for you. Check back soon!</p>
      </div>
    </div>
    <% } %>
  </div>
</main>
